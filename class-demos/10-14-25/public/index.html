<html>
    <head>
    </head>
    <body>
        <h1>Hello world!</h1>
        <form id="form">
            <label for="name">Input Name:</label>
            <input id="nameInput" name = "name" type="text">

            <label for="animal">Input Favorite Animal:</label>
            <input id="favoriteAnimal" name = "animal" type="text">

            <label for="food">Input Favorite Food:</label>
            <input id="favoriteFood" name = "food" type="text">

            <button name="submit" type="submit">Submit</button>
        </form>

        <script>
            let formElement = document.querySelector("#form")
            formElement.addEventListener("submit", async e=> { 
                e.preventDefault(); 

                let formData = new FormData(form) //FormData is a built in class
                
                //formData.entries(); //gives us an array of arrays {{name, mike}, {food, cheese}}
                // let data = {} 
                // for (let entry of entries){
                //     data[entry[0]] = entry[1]  // data[entry] = [name, megan] -> becomes name: megan
                //     console.log(data) 
                // }

                let data = Object.fromEntries(formData.entries());  //JSON that has all the data from all the inputs in a form 
                console.log(data)  

                // Fetch is going to return a promise 
                    //allows you to make calls to other programs 
                    //
                let response = await fetch("/api/add", {
                    method: "POST", 
                    headers: {"Content-Type": "application/json"}, 
                    body: JSON.stringify(data)
                })

                let responseText = await response.json //the response.<type> needs to match what is being sent back 
                console.log(responseText.name) //print the name that was appended on the serer side
            }); 
        </script>

    </body>

</html>